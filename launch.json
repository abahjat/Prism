{
    "version": "0.2.0",
    "configurations": [
        // ===========================================
        // SERVER
        // ===========================================
        {
            "type": "lldb",
            "request": "launch",
            "name": "üöÄ Run Server",
            "cargo": {
                "args": [
                    "build",
                    "--bin=prism-server",
                    "--package=prism-server"
                ],
                "filter": {
                    "name": "prism-server",
                    "kind": "bin"
                }
            },
            "args": [],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_LOG": "debug",
                "RUST_BACKTRACE": "1"
            }
        },
        {
            "type": "lldb",
            "request": "launch",
            "name": "üêõ Debug Server",
            "cargo": {
                "args": [
                    "build",
                    "--bin=prism-server",
                    "--package=prism-server"
                ],
                "filter": {
                    "name": "prism-server",
                    "kind": "bin"
                }
            },
            "args": [],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_LOG": "trace",
                "RUST_BACKTRACE": "full"
            },
            "sourceLanguages": ["rust"]
        },

        // ===========================================
        // CLI
        // ===========================================
        {
            "type": "lldb",
            "request": "launch",
            "name": "üñ•Ô∏è Run CLI (detect)",
            "cargo": {
                "args": [
                    "build",
                    "--bin=prism-cli",
                    "--package=prism-cli"
                ],
                "filter": {
                    "name": "prism-cli",
                    "kind": "bin"
                }
            },
            "args": ["detect", "${file}"],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_LOG": "info"
            }
        },
        {
            "type": "lldb",
            "request": "launch",
            "name": "üñ•Ô∏è Run CLI (convert)",
            "cargo": {
                "args": [
                    "build",
                    "--bin=prism-cli",
                    "--package=prism-cli"
                ],
                "filter": {
                    "name": "prism-cli",
                    "kind": "bin"
                }
            },
            "args": ["convert", "${file}", "-o", "output.pdf"],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_LOG": "info"
            }
        },

        // ===========================================
        // TESTS
        // ===========================================
        {
            "type": "lldb",
            "request": "launch",
            "name": "üß™ Test prism-core",
            "cargo": {
                "args": [
                    "test",
                    "--no-run",
                    "--lib",
                    "--package=prism-core"
                ],
                "filter": {
                    "name": "prism-core",
                    "kind": "lib"
                }
            },
            "args": [],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_BACKTRACE": "1"
            }
        },
        {
            "type": "lldb",
            "request": "launch",
            "name": "üß™ Test prism-parsers",
            "cargo": {
                "args": [
                    "test",
                    "--no-run",
                    "--lib",
                    "--package=prism-parsers"
                ],
                "filter": {
                    "name": "prism-parsers",
                    "kind": "lib"
                }
            },
            "args": [],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_BACKTRACE": "1"
            }
        },
        {
            "type": "lldb",
            "request": "launch",
            "name": "üß™ Test Current File",
            "cargo": {
                "args": [
                    "test",
                    "--no-run",
                    "--package=${command:currentPackage}"
                ]
            },
            "args": ["${selectedText}"],
            "cwd": "${workspaceFolder}",
            "env": {
                "RUST_BACKTRACE": "1"
            }
        },

        // ===========================================
        // BENCHMARKS
        // ===========================================
        {
            "type": "lldb",
            "request": "launch",
            "name": "üìä Run Benchmarks",
            "cargo": {
                "args": [
                    "bench",
                    "--no-run",
                    "--package=prism-core"
                ]
            },
            "args": [],
            "cwd": "${workspaceFolder}"
        }
    ],
    "compounds": [
        {
            "name": "üß™ Run All Tests",
            "configurations": [
                "üß™ Test prism-core",
                "üß™ Test prism-parsers"
            ]
        }
    ]
}
